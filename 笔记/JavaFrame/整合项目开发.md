### 一、SpringBoot+MyBatis+PageHelper整合基础功能开发

---

1. 创建SpringBoot项目导入需要的功能

2. 导入需要的坐标

   ```xml
   <dependency>
       <groupId>com.github.pagehelper</groupId>
       <artifactId>pagehelper-spring-boot-starter</artifactId>
       <version>1.4.1</version>
   </dependency>
   <dependency>
       <groupId>com.fasterxml.jackson.core</groupId>
       <artifactId>jackson-databind</artifactId>
   </dependency>
   <dependency>
       <groupId>com.alibaba</groupId>
       <artifactId>druid</artifactId>
       <version>1.1.10</version>
   </dependency>
   ```

3. 配置SpringBoot的数据源

   ```yaml
   # spring配置
   spring:
     #  数据源
     datasource:
       #    驱动
       driver-class-name: com.mysql.cj.jdbc.Driver
       #    数据库连接池类型
       type: com.alibaba.druid.pool.DruidDataSource
       #    链接地址
       url: jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC
       #    用户名
       username: root
       #    密码
       password: 123456
   ```

4. 配置MyBatis

   ```yaml
   # mybatis配置
   mybatis:
     #  mapper映射扫描
     mapper-locations: classpath:com/ynxiyan/springboot_mybatis_demo/mapper/*.xml
   ```

5. 配置PageHelper

   ```yaml
   # pagehelper分页插件配置
   pagehelper:
     #  配置数据库方言
     helper-dialect: mysql
     #  配置分页的合理化数据
     reasonable: true
     #  支持通过Mapper接口参数来传递分页参数
     support-methods-arguments: true
     #  配置参数映射
     params: count=countSql
   ```

6. 创建Mapper

   ```java
   @Mapper
   public interface UserMapper {
       /**
        * 查询所有用户信息
        *
        * @return 返回分页后的用户列表
        */
       @Select("select id, username as 'userName', gender, addr from tb_user")
       List<User> selectUserAll();
   
       /**
        * 通过用户名和密码查询用户信息（登录）
        *
        * @param userName 传入用户名
        * @param password 传入密码
        * @return 返回用户信息
        */
       @Select("select * from tb_user where username = #{userName} and password = #{password}")
       User selectUserByUserNameAndPassword(@Param("userName") String userName, @Param("password") String password);
   
       /**
        * 单条件查询用户信息
        *
        * @param user 传入需要查询的用户信息
        * @return 返回分页后用户列表
        */
       List<User> selectUserSwith(User user);
   
       /**
        * 多条件查询用户信息
        *
        * @param user 传入需要查询的用户信息
        * @return 返回分页后的用户列表
        */
       List<User> selectUserCondition(User user);
   
       /**
        * 新增用户信息（注册）
        *
        * @param userName 传入用户名
        * @param password 传入密码
        * @return 返回受影响的行数
        */
       @Insert("insert into tb_user (username, password) values (#{userName},#{password})")
       int insertUserByUserNameAndPassword(@Param("userName") String userName, @Param("password") String password);
   
       /**
        * 新增用户信息
        *
        * @param user 传入用户信息
        * @return 返回受影响的行数
        */
       int insertUser(User user);
   
       /**
        * 通过用户名修改密码
        *
        * @param userName 传入用户名
        * @param password 传入新密码
        * @return 返回受影响的行数
        */
       @Update("update tb_user set password = #{password} where username = #{userName}")
       int updateUserByUserName(@Param("userName") String userName, @Param("password") String password);
   
       /**
        * 修改用户信息
        *
        * @param user 传入需要修改的用户信息
        * @return 返回受影响的行数
        */
       int updateUser(User user);
   
       /**
        * 通过id删除用户信息
        *
        * @param id 传入id
        * @return 返回受影响的行数
        */
       @Delete("delete from tb_user where id = #{id}")
       int deleteUserById(@Param("id") int id);
   
       /**
        * 批量删除用户信息
        * @param ids 传入id列表
        * @return
        */
       int deleteUserByids(@Param("ids") List<Integer> ids);
   }
   ```

7. 创建Mapper映射

   ```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   <mapper namespace="com.ynxiyan.springboot_mybatis_demo.mapper.UserMapper">
       <!--    处理字段-->
       <resultMap id="userColum" type="com.ynxiyan.springboot_mybatis_demo.model.User">
           <result column="username" property="userName"/>
       </resultMap>
       <!--    新增用户信息-->
       <insert id="insertUser">
           insert into tb_user (username, password
           <if test="gender != null and gender != ''">
               ,gender
           </if>
           <if test="addr != null and addr != ''">
               ,addr
           </if>
           )
           values (#{userName},'0000'
           <if test="gender != null and gender != ''">
               ,#{gender}
           </if>
           <if test="addr != null and addr != ''">
               ,#{addr}
           </if>
           )
       </insert>
       <!--    修改用户信息-->
       <update id="updateUser">
           update tb_user
           <set>
               <if test="userName != null and userName != ''">
                   username = #{userName}
               </if>
               <if test="gender != null and gender != ''">
                   gender = #{gender}
               </if>
               <if test="addr != null and addr != ''">
                   addr = #{addr}
               </if>
           </set>
           where id = #{id}
       </update>
       <!--    批量删除用户信息-->
       <delete id="deleteUserByids">
           delete
           from tb_user
           where id in
           <foreach collection="ids" item="id" separator="," open="(" close=")">
               #{id}
           </foreach>
       </delete>
       <!--    单条件查询用户信息-->
       <select id="selectUserSwith" resultMap="userColum">
           select id, username, gender, addr
           from tb_user
           <where>
               <choose>
                   <when test="userName != null and userName != ''">
                       username like #{userName}
                   </when>
                   <when test="gender != null and gender != ''">
                       gender=#{gender}
                   </when>
                   <when test="addr != null and addr != ''">
                       addr=#{addr}
                   </when>
               </choose>
           </where>
       </select>
       <!--    多条件查询用户信息-->
       <select id="selectUserCondition" resultMap="userColum">
           select id, username, gender, addr
           from tb_user
           <where>
               <if test="userName != null and userName != ''">
                   username like #{userName}
               </if>
               <if test="gender != null and gender != ''">
                   and gender=#{gender}
               </if>
               <if test="addr != null and addr != ''">
                   and addr=#{addr}
               </if>
           </where>
       </select>
   </mapper>
   ```

8. 创建Service

   ```java
   public interface UserService {
       List<User> getUserAll();
   
       User login(String userName, String password);
   
       List<User> getUserSwith(User user);
   
       List<User> getUserCondition(User user);
   
       boolean register(String userName, String password);
   
       boolean postUser(User user);
   
       boolean change(String userName, String password);
   
       boolean putUser(User user);
   
       boolean deleteUserById(int id);
   
       boolean deleteUserByids(List<User> userList);
   }
   ```

9. 创建Service实现

   ```java
   @Service
   public class UserServiceImpl implements UserService {
       @Autowired
       private UserMapper userMapper;
   
       @Override
       public List<User> getUserAll() {
           return userMapper.selectUserAll();
       }
   
       @Override
       public User login(String userName, String password) {
           return userMapper.selectUserByUserNameAndPassword(userName, password);
       }
   
       @Override
       public List<User> getUserSwith(User user) {
           return userMapper.selectUserSwith(user);
       }
   
       @Override
       public List<User> getUserCondition(User user) {
           return userMapper.selectUserCondition(user);
       }
   
       @Override
       public boolean register(String userName, String password) {
           return userMapper.insertUserByUserNameAndPassword(userName, password) > 0;
       }
   
       @Override
       public boolean postUser(User user) {
           return userMapper.insertUser(user) > 0;
       }
   
       @Override
       public boolean change(String userName, String password) {
           return userMapper.updateUserByUserName(userName, password) > 0;
       }
   
       @Override
       public boolean putUser(User user) {
           return userMapper.updateUser(user) > 0;
       }
   
       @Override
       public boolean deleteUserById(int id) {
           return userMapper.deleteUserById(id) > 0;
       }
   
       @Override
       public boolean deleteUserByids(List<User> userList) {
           ArrayList<Integer> list = new ArrayList<>();
           for (int i = 0; i < userList.size(); i++) {
               list.add(userList.get(i).getId());
           }
           return userMapper.deleteUserByids(list) > 0;
       }
   }
   ```

10. 数据封装

    ```java
    @Data
    @NoArgsConstructor
    @AllArgsConstructor
    public class Result {
        //状态码
        private Integer code;
        //数据
        private Object data;
        //消息
        private String msg;
        
        public Result(Integer code, Object data) {
            this.code = code;
            this.data = data;
        }
    
        public Result(Integer code, String msg) {
            this.code = code;
            this.msg = msg;
        }
    }
    ```

11. 状态码

    ```java
    public class Code {
        //新增成功
        public static final Integer SAVE_OK = 20011;
        //删除成功
        public static final Integer DELETE_OK = 20021;
        //更新成功
        public static final Integer UPDATE_OK = 20031;
        //查询成功
        public static final Integer GET_OK = 20041;
        //新增失败
        public static final Integer SAVE_ERROR = 20010;
        //删除失败
        public static final Integer DELETE_ERROR = 20020;
        //更新失败
        public static final Integer UPDATE_ERROR = 20030;
        //查询失败
        public static final Integer GET_ERROR = 20040;
        //系统错误
        public static final Integer SYSTEM_ERROR = 50001;
        //服务器访问超时
        public static final Integer SYSTEM_TIMEOUT_ERROR = 50002;
        //系统未知错误
        public static final Integer SYSTEM_UNKNOW_ERROR = 59999;
        //业务错误
        public static final Integer BUSINESS_ERROR = 60001;
    }
    ```

12. 创建Controller

    ```java
    @RestController
    @RequestMapping("/users")
    public class UserController {
        @Autowired
        private UserService userService;
    
        //查询所有用户列表
        @GetMapping
        public Result getUserList() {
            List<User> userList = userService.getUserAll();
            int code = userList != null ? Code.GET_OK : Code.GET_ERROR;
            String msg = userList != null ? "查询成功" : "查询失败，请稍后重试";
            return new Result(code, userList, msg);
        }
    
        //单条件查询
        @GetMapping("/swith")
        public Result getUserSwith(User user) {
            List<User> userList = userService.getUserSwith(user);
            int code = userList != null ? Code.GET_OK : Code.GET_ERROR;
            String msg = userList != null ? "查询成功" : "查询失败，请稍后重试";
            return new Result(code, userList, msg);
        }
    
        //多条件查询
        @GetMapping("/condition")
        public Result getUserCondition(User user) {
            List<User> userList = userService.getUserCondition(user);
            int code = userList != null ? Code.GET_OK : Code.GET_ERROR;
            String msg = userList != null ? "查询成功" : "查询失败，请稍后重试";
            return new Result(code, userList, msg);
        }
    
        //新增用户信息
        @PostMapping
        public Result postUser(User user) {
            boolean postUser = userService.postUser(user);
            int code = postUser ? Code.SAVE_OK : Code.SAVE_ERROR;
            String msg = postUser ? "新增成功" : "新增失败";
            return new Result(code, msg);
        }
    
        //修改用户信息
        @PutMapping
        public Result putUser(User user) {
            boolean putUser = userService.putUser(user);
            int code = putUser ? Code.SAVE_OK : Code.SAVE_ERROR;
            String msg = putUser ? "修改成功" : "修改失败";
            return new Result(code, msg);
        }
    
        //通过id删除用户信息
        @DeleteMapping("/{id}")
        public Result deleteUserById(@PathVariable("id") int id) {
            boolean deleteUserById = userService.deleteUserById(id);
            int code = deleteUserById ? Code.DELETE_OK : Code.DELETE_ERROR;
            String msg = deleteUserById ? "删除成功" : "删除失败";
            return new Result(code, msg);
        }
    
        //批量删除用户信息
        @DeleteMapping
        public Result deleteUserByIds(@RequestBody List<User> userList) {
            boolean deleteUserByids = userService.deleteUserByids(userList);
            int code = deleteUserByids ? Code.DELETE_OK : Code.DELETE_ERROR;
            String msg = deleteUserByids ? "批量删除成功" : "批量删除失败";
            return new Result(code, msg);
        }
    }
    ```



### 二、SpringBoot+MyBatisPlus整合基础功能开发

---

1. 